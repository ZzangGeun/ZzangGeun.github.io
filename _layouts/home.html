---
layout: default
---

<div class="home">
  {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  {%- if site.posts.size > 0 -%}
    <div class="home-content">      <!-- 태그 사이드바 -->
      <aside class="tags-sidebar">
        <h3 class="tags-title">태그</h3>
        <div class="tags-cloud">
          <button class="tag-filter active" data-tag="all">
            전체보기
          </button>
          
          {%- assign all_tags = site.posts | map: 'tag' | join: ' ' | split: ' ' | uniq | sort -%}
          {%- for tag in all_tags -%}
            {%- unless tag == '' -%}
              {%- assign tag_posts = site.posts | where_exp: "post", "post.tag contains tag" -%}
              <button class="tag-filter" data-tag="{{ tag }}">
                #{{ tag }} <span class="tag-count">({{ tag_posts.size }})</span>
              </button>
            {%- endunless -%}
          {%- endfor -%}
        </div>
      </aside>

      <!-- 포스트 목록 -->
      <main class="posts-main">
        <h2 class="post-list-heading">{{ page.list_title | default: "최근 게시글" }}</h2>
        <ul class="post-list">
          {%- for post in site.posts -%}
          <li class="post-item-wrapper" data-tags="{{ post.tag | default: '' }}">
            <div class="post-item">
              {%- if post.series -%}
                <div class="post-series">
                  <span class="series-tag">📚 {{ post.series }}</span>
                </div>
              {%- endif -%}
              {%- if post.tag -%}
                <div class="post-tags">
                  {%- assign tags = post.tag | split: ' ' -%}
                  {%- for tag in tags -%}
                    <span class="tag-item">#{{ tag }}</span>
                  {%- endfor -%}
                </div>
              {%- endif -%}
              {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
              <span class="post-meta">{{ post.date | date: date_format }}</span>
              <h3>
                <a class="post-link" href="{{ post.url | relative_url }}">
                  {{ post.title | escape }}
                </a>
              </h3>
              {%- if site.show_excerpts -%}
                {{ post.excerpt }}
              {%- else -%}
                <p class="post-excerpt">{{ post.content | strip_html | truncatewords: 30 }}</p>
              {%- endif -%}
            </div>
          </li>
          {%- endfor -%}
        </ul>
      </main>
    </div>
  {%- endif -%}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tagFilters = document.querySelectorAll('.tag-filter');
  const postItems = document.querySelectorAll('.post-item-wrapper');
  
  tagFilters.forEach(filter => {
    filter.addEventListener('click', function() {
      const selectedTag = this.getAttribute('data-tag');
      
      // 활성 태그 업데이트
      tagFilters.forEach(f => f.classList.remove('active'));
      this.classList.add('active');
      
      // 포스트 필터링
      postItems.forEach(item => {
        const postTags = item.getAttribute('data-tags');
        
        if (selectedTag === 'all' || postTags.includes(selectedTag)) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    });
  });
});
</script>
