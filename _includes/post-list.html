{%- comment -%}
포스트 목록 생성
홈페이지에서 사용되는 포스트 목록을 생성
{%- endcomment -%}

{%- if site.posts.size > 0 -%}        
<div class="post-list-header">
  <h2 class="post-list-heading">{{ page.list_title | default: "최근 게시글" }}</h2>
  <div class="header-buttons">
    <a href="{{ '/' | relative_url }}" class="header-btn" id="recent-btn">
      <span class="btn-icon">📝</span>
      <span class="btn-text">최근 게시글</span>
    </a>
    <a href="{{ '/series/' | relative_url }}" class="header-btn" id="series-btn">
      <span class="btn-icon">📚</span>
      <span class="btn-text">시리즈</span>
    </a>
    <a href="{{ site.baseurl }}{% post_url 2025-06-07-ZzangGeun의 블로그에 오신 것을 환영합니다! %}" class="header-btn" id="intro-btn">
      <span class="btn-icon">👋</span>
      <span class="btn-text">블로그 소개</span>
    </a>
  </div>
</div>

<script>
// 현재 페이지에 따라 활성 버튼 표시
document.addEventListener('DOMContentLoaded', function() {
  const currentPath = window.location.pathname;
  const buttons = document.querySelectorAll('.header-btn');
  
  // 모든 버튼에서 active 클래스 제거
  buttons.forEach(btn => btn.classList.remove('active'));
  
  // 현재 페이지에 해당하는 버튼에 active 클래스 추가
  if (currentPath === '/' || currentPath === '/index.html') {
    document.getElementById('recent-btn')?.classList.add('active');
  } else if (currentPath.includes('/series/')) {
    document.getElementById('series-btn')?.classList.add('active');
  } else if (currentPath.includes('ZzangGeun의-블로그에-오신-것을-환영합니다')) {
    document.getElementById('intro-btn')?.classList.add('active');
  }
});
</script>

<ul class="post-list">
  {%- for post in site.posts -%}
  <li>
    <div class="post-item">
      {%- comment -%} 시리즈 정보 {%- endcomment -%}
      {%- if post.series -%}
        <div class="post-series">
          <span class="series-tag">📚 {{ post.series }}</span>
        </div>
      {%- endif -%}
      
      {%- comment -%} 태그 정보 {%- endcomment -%}
      {%- if post.tag -%}                
      <div class="post-tags">
          {%- assign tags = post.tag | split: ' ' -%}
          {%- for tag in tags -%}
            <span class="tag-item">{{ tag }}</span>
          {%- endfor -%}
        </div>
      {%- endif -%}
      
      {%- comment -%} 게시 날짜 {%- endcomment -%}
      {%- assign date_format = site.minima.date_format | default: "%Y년 %m월 %d일" -%}
      <span class="post-meta">{{ post.date | date: date_format }}</span>
      
      {%- comment -%} 제목 {%- endcomment -%}
      <h3>
        <a class="post-link" href="{{ post.url | relative_url }}">
          {{ post.title | escape }}
        </a>
      </h3>
      
      {%- comment -%} 요약 {%- endcomment -%}
      <p class="post-excerpt">{{ post.content | strip_html | truncatewords: 30 }}</p>
    </div>
  </li>
  {%- endfor -%}
</ul>
{%- endif -%}
